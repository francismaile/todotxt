<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>ToDo_txt app</title>
	<link href="style.css" rel="stylesheet">

	<script src="polyfills.js"></script>

</head>

<body>

<div id="wrapper">

<section id="nav">
	<nav>
		<ul id="nav-tab" class="nav">
			<li class="tab active" id="all">*</li>
			<li class="tab" id="project">+</li>
			<li class="tab" id="context">@</li>
			<li class="tab" id="priority">(!)</li>
			<li class="tab" id="txt">txt</li>
		</ul>

		<!-- Tab panes -->
		<div class="tab-content">
			<div class="tab-pane active" id="all-tab">
				<ul id="all-menu">
					<li id="project-item">Projects</li>
					<li id="context-item">Contexts</li>
					<li id="priority-item">Priority</li>
					<li id="tag-item">Tags</li>
				</ul>
			</div><!-- tab-panes -->
			<div class="tab-pane" id="project-tab">
				<ul id="project-menu">
				</ul>
			</div>
			<div class="tab-pane" id="context-tab">
				<ul id="context-menu">
				</ul>
			</div>
			<div class="tab-pane" id="priority-tab">
				<ul id="priority-menu">
				</ul>
			</div>
			<div class="txt-pane" id="txt-tab">
				<ul id="txt-menu">
				</ul>
			</div>
		</div><!-- tab-content -->
		<div id="sort-order"><p>Sort by:</p>
			<ul>
				<li>Created</li>
				<li>Due</li>
				<li>Completed</li>
			</ul>
		</div><!-- #sort-order -->
	</nav>
</section><!-- /nav -->

<section id="todolist">

<!-- Task Edit Form -->
<div id="task-edit-wrapper">
<form action="" id="task-edit" method="">
	<fieldset>
		<input type="text" size="55"  id="description" placeholder="Add a new todoâ€¦" value="" size="80">
		<input type="hidden" id="taskid">
		<input type="hidden" id="category" value="test">
		<input type="hidden" id="whichCategory" value="test">
	</fieldset>
	<fieldset id="task-options">
		Priority:
		<select id="priority">
			<option value ></option>
			<option value="A">A</option>
			<option value="B">B</option>
			<option value="C">C</option>
		</select>
		<div>
			<label>Project:<input list="projects" id="project"></label>
			<datalist id="projects">
				<select>
				</select>
			</datalist>
		</div>
		<div>
			<label>Context:<input list="contexts" id="context"></label>
			<datalist id="contexts">
				<select>
				</select>
			</datalist>
		</div>
		<div>
			<label for="created">Created Date:
				<input type="date" id="created">
			</label>
		</div>
		<div>
			<label for="due">Due Date:
				<input type="date" id="due">
			</label>
		</div>
		<div>
			<label for="completeDate">Completed Date:
				<input type="date" id="completeDate">
			</label>
		</div>
		<div>
			<label for="tags">Tags:
				<textarea id="tags" rows=1></textarea>
			</label>
		</div>
		<input type="submit" id="submit-changes" value="Go">
		<input type="reset" id="revert-changes" value="Cancel">
	</fieldset>
</form>
</div>


<div id="todo-wrapper">

<div id="task-list">

<!--	<div class="task-pane active" id="all-pane">
<ul><li>All tasks</li>
	</ul>
</div>
<div class="task-pane" id="project-pane">
	<ul><li>Projects</li>
	</ul>
</div>
<div class="task-pane" id="context-pane">
	<ul><li>Contexts</li>
	</ul>
</div>
<div class="task-pane" id="priority-pane">
	<ul><li>Priorities</li>
	</ul>
</div>
<div class="task-pane" id="tag-pane">
	<ul><li>Tags</li>
	</ul>
</div> -->

</div><!-- task list -->

</div><!-- /todo-wrapper -->


</section><!-- /todolist -->


</div><!-- /wrapper -->

<p>
<button id="saveToFile">Save</button>
</p>

<p>
<button id="show-form">Show Form</button>
<button id="hide-form">Hide Form</button>
</p>

<script src="db/idb.js">
</script>

<script src="db/db.js">
</script>

<script src="parser.js">
</script>

<script src="taskedit.js">
</script>

<script src="render.js">
</script>

<script src="fileio.js">
</script>

<script src="index.js">
// can i put comments here and not crash the app?
// apparently, I can
</script>

<script>
// choose local todo.txt file
const fileSelector = document.createElement('input');
fileSelector.setAttribute('type', 'file');

const selectDialogueLink = document.createElement('a');
selectDialogueLink.setAttribute('href', '');
selectDialogueLink.innerText = "Select File";

selectDialogueLink.onclick = function () {
     fileSelector.click();
     return false;
}
// document.body.appendChild(selectDialogueLink);
     fileSelector.click(); // must be fired by user

document.getElementById('saveToFile').addEventListener('click', saveFile);

document.getElementById('show-form').addEventListener("click", function(event) {
	showTaskEditForm();
	console.log(event.target);
	console.log(taskEditForm);
	// taskEditForm.style.display = 'inline';
	// taskEditForm['task-options'].style.display = 'inline';
	// console.log(taskEditForm['task-options']);
}, false);

document.getElementById('hide-form').addEventListener("click", function() {
	taskEditForm['task-options'].style.display = 'none';
}, false);

// Hide the gray autofill icon inserted by LastPass
const inputFields = document.querySelectorAll('input').forEach( field => {
	field.dataset.lpignore = true;
});

</script>

</body>
</html>
